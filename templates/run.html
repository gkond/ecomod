{% extends "base.html" %}
{% from "_render_field.html" import render_form %}

{% block title %}
    Run modeling
{% endblock %}

{% block head %}
    {{ super() }}
    <script>
        function updateForm(url) {
            var data = $('form').serialize()
            $.post({
                url: url,
                data: data,
                success: function (html) {
                    $('.form-wrap').empty().html(html)
                },
                error: function (error) {
                    console.error(error)
                }
            })
        }

        function addCommand(e) {
            var field = $(e.target).data('field')

            updateForm('/run/command/add?field=' + field)
        }

        function removeCommand(e) {
            var field = $(e.target).data('field')

            updateForm('/run/command/remove?field=' + field)
        }

        $(function () {
            $("body").on('click', 'button[data-command=add]', addCommand)
            $("body").on('click', 'button[data-command=remove]', removeCommand)
        })
    </script>
{% endblock %}

{% block content %}
    <h1>Run modeling</h1>
    <div class="form-wrap">
        {{ render_form(form) }}
    </div>
{% endblock %}